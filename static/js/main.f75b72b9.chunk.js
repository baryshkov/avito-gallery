(this["webpackJsonpavito-gallery"]=this["webpackJsonpavito-gallery"]||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n(20)},,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(4),l=n.n(c),s=(n(11),n(1)),o=n.n(s),m=n(2),i=n(5),u=function e(){var t=this;Object(i.a)(this,e),this.API_BASE="https://boiling-refuge-66454.herokuapp.com/images/",this.getAllPreviews=function(){var e;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.awrap(fetch("".concat(t.API_BASE)));case 2:if((e=n.sent).ok){n.next=5;break}throw new Error("Could not fetch ".concat(t.API_BASE,", received an error with response status \n        ").concat(e.status));case 5:return n.abrupt("return",e.json());case 6:case"end":return n.stop()}}))},this.getImageAndComments=function(e){var n;return o.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.a.awrap(fetch("".concat(t.API_BASE).concat(e)));case 2:if((n=a.sent).ok){a.next=5;break}throw new Error("empty for now");case 5:return a.abrupt("return",n.json());case 6:case"end":return a.stop()}}))},this.postComment=function(e,n,a){var r,c,l;return o.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return r="".concat(t.API_BASE).concat(a,"/comments"),c={name:n,comment:e},s.next=4,o.a.awrap(fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}));case 4:return l=s.sent,s.abrupt("return",l);case 6:case"end":return s.stop()}}))}},d=(n(13),n(14),function(){return r.a.createElement("div",{className:"spinner-container"},r.a.createElement("div",{className:"loadingio-spinner-spinner-sv8p6szpyb"},r.a.createElement("div",{className:"ldio-hscnriwj1a5"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))))}),p=r.a.createElement("svg",{className:"modal__close-button",width:"20",height:"19",viewBox:"0 0 20 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("line",{x1:"1.35355",y1:"0.646447",x2:"19.3536",y2:"18.6464",stroke:"black"}),r.a.createElement("line",{x1:"0.646447",y1:"18.6464",x2:"18.6464",y2:"0.646446",stroke:"black"})),v=function(e){var t=e.imageId,n=e.onClose,c=e.forwardedRef,l=new u,s=Object(a.useState)(null),i=Object(m.a)(s,2),v=i[0],f=i[1],E=Object(a.useState)(null),w=Object(m.a)(E,2),b=w[0],h=w[1],g=Object(a.useState)(!0),_=Object(m.a)(g,2),y=_[0],j=_[1],N=Object(a.useState)(null),k=Object(m.a)(N,2),O=k[0],x=k[1],C=Object(a.useState)(null),A=Object(m.a)(C,2),S=A[0],I=A[1];Object(a.useEffect)((function(){j(!0);!function(){var e;o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.awrap(l.getImageAndComments(t));case 2:e=n.sent,f(e.url),h(e.comments),j(!1);case 6:case"end":return n.stop()}}))}()}),[]);var P=function(e){var t=e.target,n=t.value;"name"===t.name?x(n):I(n)},B=b&&0===b.length?r.a.createElement("div",{className:"comments-wrapper__comment"},r.a.createElement("div",{className:"comments-wrapper__comment__text"},"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0431\u0443\u0434\u0435\u0442 \u043f\u0435\u0440\u0432\u044b\u043c!")):null;return r.a.createElement("div",{className:"container",ref:c},r.a.createElement("button",{type:"button",className:"close-button",onClick:n},p),y&&r.a.createElement(d,null)||r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"wrapper"},r.a.createElement("img",{className:"image",src:v,alt:"hi-res"})),r.a.createElement("div",{className:"comments-wrapper"},B||b&&b.map((function(e){var t=e.date,n=e.id,a=e.text,c=new Date(t).toLocaleDateString("ru-RU");return r.a.createElement("div",{className:"comments-wrapper__comment",key:n},r.a.createElement("time",{className:"comments-wrapper__comment__date",dateTime:c.split(".").reverse().join("-")},c),r.a.createElement("div",{className:"comments-wrapper__comment__text"},a))}))),r.a.createElement("form",{className:"input-form",onSubmit:function(e){e.preventDefault(),console.table({username:O,userComment:S}),l.postComment(S,O,t)}},r.a.createElement("input",{className:"input-form__name",type:"text",name:"name",placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",onChange:P,required:!0}),r.a.createElement("input",{className:"input-form__comment",type:"text",name:"comment",placeholder:"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",onChange:P,required:!0}),r.a.createElement("input",{type:"submit",className:"input-form__button",value:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}))))},f=(n(15),function(e){var t=e.onClose,n=e.id,c=Object(a.useRef)(null),l=Object(a.useCallback)((function(e){var n={27:function(){e.preventDefault(),t(),window.removeEventListener("keyup",l,!1)}};n[e.keyCode]&&n[e.keyCode]()}),[t]),s=Object(a.useCallback)((function(e){null!==c&&void 0!==c&&(c.current.contains(e.target)||(t(),document.removeEventListener("click",s,!1)))}),[t]);return Object(a.useEffect)((function(){return window.addEventListener("keyup",l,!1),document.addEventListener("click",s,!1),function(){window.removeEventListener("keyup",l,!1),document.removeEventListener("click",s,!1)}}),[l,s]),r.a.createElement("div",{className:"modal"},r.a.createElement(v,{imageId:n,onClose:t,forwardedRef:c}))}),E=(n(16),function(){var e=new u,t=Object(a.useState)(null),n=Object(m.a)(t,2),c=n[0],l=n[1],s=Object(a.useState)(!1),i=Object(m.a)(s,2),p=i[0],v=i[1],E=Object(a.useState)(null),w=Object(m.a)(E,2),b=w[0],h=w[1];Object(a.useEffect)((function(){!function(){var t;o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.awrap(e.getAllPreviews());case 2:t=n.sent,l(t);case 4:case"end":return n.stop()}}))}()}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"gallery"},c&&c.map((function(e){var t=e.id,n=e.url;return r.a.createElement("img",{className:"img",key:t,src:n,alt:"preview",onClick:function(){return function(e){h(e),v(!0)}(t)}})}))||r.a.createElement(d,null)),p&&r.a.createElement(f,{onClose:function(){return v(!1)},id:b}))}),w=(n(17),function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("span",{className:"footer-copyright"},"\xa9 2018-2019"))}),b=(n(18),n(19),function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",{className:"App-header__title"},"TEST APP")),r.a.createElement(E,null),r.a.createElement(w,null))});l.a.render(r.a.createElement(b,null),document.getElementById("root"))}],[[6,1,2]]]);
//# sourceMappingURL=main.f75b72b9.chunk.js.map